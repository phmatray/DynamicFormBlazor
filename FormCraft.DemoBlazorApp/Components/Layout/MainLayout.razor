@inherits LayoutComponentBase
@inject IVersionService VersionService

<MudThemeProvider Theme="_theme" IsDarkMode="@_isDarkMode" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1" Dense="false">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer" />
        <MudLink Href="/home" Class="d-flex align-center" Style="text-decoration: none; color: inherit;">
            <MudIcon Icon="@Icons.Material.Filled.DynamicForm" Class="ml-3 me-2" Size="Size.Large" Style="color: white;" />
            <MudText Typo="Typo.h5" Class="font-weight-bold" Style="color: white;">
                FormCraft
            </MudText>
        </MudLink>
        <MudChip T="string" Text="@($"v{VersionService.FormCraftVersion}")" Size="Size.Small" Color="Color.Primary" Class="ml-2 mt-1" />
        <MudSpacer />
        
        <MudTooltip Text="Toggle light/dark mode">
            <MudIconButton Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)" 
                           Color="Color.Inherit" 
                           OnClick="@ToggleTheme" />
        </MudTooltip>
        
        <MudDivider Vertical="true" FlexItem="true" Class="mx-2 my-2" />
        
        <MudButton Variant="Variant.Text" 
                   Color="Color.Inherit" 
                   StartIcon="@Icons.Material.Filled.MenuBook"
                   Href="/docs/getting-started">
            Docs
        </MudButton>
        
        <MudButton Variant="Variant.Text" 
                   Color="Color.Inherit" 
                   StartIcon="@Icons.Custom.Brands.GitHub" 
                   Href="https://github.com/phmatray/FormCraft" 
                   Target="_blank">
            GitHub
        </MudButton>
        
        <MudButton Variant="Variant.Filled" 
                   Color="Color.Primary" 
                   StartIcon="@Icons.Material.Filled.GetApp"
                   Href="https://www.nuget.org/packages/FormCraft"
                   Target="_blank"
                   Class="ml-2">
            Get Started
        </MudButton>
    </MudAppBar>
    
    <MudDrawer @bind-Open="@_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2">
        <MudNavMenu>
            <MudNavLink Href="/home" Icon="@Icons.Material.Filled.Home">
                Home
            </MudNavLink>
            
            <MudNavGroup Title="Form Examples" Icon="@Icons.Material.Filled.Dashboard" Expanded="true">
                <MudNavLink Href="/simplified" Icon="@Icons.Material.Filled.AutoFixHigh">
                    Simplified API
                </MudNavLink>
                <MudNavLink Href="/improved" Icon="@Icons.Material.Filled.Engineering">
                    Type-Safe Builder
                </MudNavLink>
                <MudNavLink Href="/fluent" Icon="@Icons.Material.Filled.FlashOn">
                    Fluent API
                </MudNavLink>
                <MudNavLink Href="/field-groups" Icon="@Icons.Material.Filled.GridView">
                    Field Groups
                </MudNavLink>
                <MudNavLink Href="/custom-renderers" Icon="@Icons.Material.Filled.Palette">
                    Custom Renderers
                </MudNavLink>
                <MudNavLink Href="/file-upload" Icon="@Icons.Material.Filled.CloudUpload">
                    File Upload
                </MudNavLink>
            </MudNavGroup>
            
            <MudNavGroup Title="Documentation" Icon="@Icons.Material.Filled.MenuBook" Expanded="true">
                <MudNavLink Href="/docs/getting-started" Icon="@Icons.Material.Filled.PlayArrow">
                    Getting Started
                </MudNavLink>
                <MudNavLink Href="/docs/api-reference" Icon="@Icons.Material.Filled.Code">
                    API Reference
                </MudNavLink>
                <MudNavLink Href="/docs/examples" Icon="@Icons.Material.Filled.AutoAwesome">
                    Examples
                </MudNavLink>
                <MudNavLink Href="/docs/customization" Icon="@Icons.Material.Filled.Palette">
                    Customization
                </MudNavLink>
                <MudNavLink Href="/docs/troubleshooting" Icon="@Icons.Material.Filled.BugReport">
                    Troubleshooting
                </MudNavLink>
            </MudNavGroup>
        </MudNavMenu>
    </MudDrawer>
    
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="my-4">
            @Body
        </MudContainer>
        
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-8 mb-4">
            <MudDivider />
            <div class="d-flex justify-center align-center py-4">
                <MudText Typo="Typo.body2" Align="Align.Center" Class="text-muted">
                    Made with <MudIcon Icon="@Icons.Material.Filled.Favorite" Size="Size.Small" Color="Color.Error" Style="vertical-align: middle;" /> for Blazor
                </MudText>
            </div>
        </MudContainer>
    </MudMainContent>
</MudLayout>

<div id="blazor-error-ui" data-nosnippet>
  An unhandled error has occurred.
  <a href="." class="reload">Reload</a>
  <span class="dismiss">ðŸ—™</span>
</div>

@code {
    private bool _drawerOpen = true;
    private bool _isDarkMode;
    
    private readonly MudTheme _theme = new()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = Colors.Blue.Default,
            Secondary = Colors.Teal.Default,
            AppbarBackground = Colors.Blue.Default,
            AppbarText = Colors.Shades.White,
            DrawerBackground = "#f5f5f5",
            DrawerText = "#424242",
            DrawerIcon = "#616161"
        },
        PaletteDark = new PaletteDark()
        {
            Primary = Colors.Blue.Lighten1,
            Secondary = Colors.Teal.Lighten1,
            AppbarBackground = "#212121",
            AppbarText = Colors.Shades.White,
            DrawerBackground = "#212121",
            DrawerText = "#e0e0e0",
            DrawerIcon = "#bdbdbd",
            Surface = "#424242",
            Background = "#303030",
            BackgroundGray = "#424242"
        }
    };

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }
    
    private void ToggleTheme()
    {
        _isDarkMode = !_isDarkMode;
    }
}

<style>
    .text-muted {
        opacity: 0.7;
    }
</style>