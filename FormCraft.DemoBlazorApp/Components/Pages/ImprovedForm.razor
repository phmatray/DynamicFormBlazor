@page "/improved"
@inject FormCodeGeneratorService CodeGenerator

<DemoPageLayout
    Title="Improved Dynamic Form API"
    Icon="@Icons.Material.Filled.Engineering"
    Description="This demonstrates the new type-safe, feature-rich dynamic form API with validation, dependencies, and advanced field configuration."
    FormDemoIcon="@Icons.Material.Filled.Build">
    <FormDemoContent>
        <FormDemoSection
            TModel="ContactModel"
            Model="@_model"
            Configuration="@_formConfiguration"
            FormTitle="Type-Safe Form Builder"
            FormIcon="@Icons.Material.Filled.FactCheck"
            IsSubmitted="@_isSubmitted"
            IsSubmitting="@_isSubmitting"
            OnValidSubmit="@HandleValidSubmit"
            OnFieldChanged="@((args) => HandleFieldChanged(args.fieldName, args.value))"
            OnReset="@ResetForm"
            DataDisplayItems="@GetDataDisplayItems()"
            ShowSubmitButton="true"
            SubmitButtonText="Submit Application"
            SubmittingText="Submitting..."
            SubmitButtonClass="px-8">
            <SidebarContent>
                <FormGuidelines Guidelines="@_sidebarFeatures" Title="API Features" />
            </SidebarContent>
        </FormDemoSection>
    </FormDemoContent>
    
    <CodeExampleContent>
        <CodeExample
            Title="Type-Safe Form Configuration"
            Language="csharp"
            Code="@GetGeneratedCode()" />
    </CodeExampleContent>
    
    <GuidelinesContent>
        <ApiGuidelinesTable
            Title="Improved API Guidelines"
            Items="@_apiGuidelineTableItems" />
    </GuidelinesContent>
</DemoPageLayout>