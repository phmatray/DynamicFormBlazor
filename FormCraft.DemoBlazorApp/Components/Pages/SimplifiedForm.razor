@page "/simplified"
@inject FormCodeGeneratorService CodeGenerator

<DemoPageLayout
    Title="Simplified Dynamic Form API"
    Icon="@Icons.Material.Filled.AutoFixHigh"
    Description="This demonstrates the simplified API that hides complexity from users while providing powerful features.">
    <FormDemoContent>
        <FormDemoSection
            TModel="ContactModel"
            Model="@_model"
            Configuration="@_formConfiguration"
            FormTitle="Contact Form Example"
            FormIcon="@Icons.Material.Filled.ContactPage"
            IsSubmitted="@_isSubmitted"
            IsSubmitting="@_isSubmitting"
            OnValidSubmit="@HandleValidSubmit"
            OnFieldChanged="@(args => HandleFieldChanged(args.fieldName, args.value))"
            OnReset="@ResetForm"
            DataDisplayItems="@GetDataDisplayItems()">
            <SidebarContent>
                <FormGuidelines Guidelines="@_sidebarFeatures" Title="Simplified API Benefits" />
            </SidebarContent>
            <AdditionalContent>
                @if (_fieldChanges.Any())
                {
                    <MudCard Class="mt-4" Elevation="2">
                        <MudCardContent>
                            <MudText Typo="Typo.h6" GutterBottom="true" Class="d-flex align-items-center">
                                <MudIcon Icon="@Icons.Material.Filled.Timeline" Class="me-2 text-info" />
                                Field Changes Log
                            </MudText>
                            <MudList T="string" Dense="true">
                                @foreach (string change in _fieldChanges.TakeLast(5))
                                {
                                    <MudListItem T="string" Icon="@Icons.Material.Filled.Update" IconColor="Color.Secondary">
                                        <MudText Typo="Typo.body2">@change</MudText>
                                    </MudListItem>
                                }
                            </MudList>
                        </MudCardContent>
                    </MudCard>
                }
            </AdditionalContent>
        </FormDemoSection>
    </FormDemoContent>
    
    <CodeExampleContent>
        <CodeExample
            Title="Complete Form Configuration"
            Language="csharp"
            Code="@GetGeneratedCode()" />
    </CodeExampleContent>
    
    <GuidelinesContent>
        <ApiGuidelinesTable
            Title="Simplified API Guidelines"
            Items="@_apiGuidelineTableItems" />
    </GuidelinesContent>
</DemoPageLayout>