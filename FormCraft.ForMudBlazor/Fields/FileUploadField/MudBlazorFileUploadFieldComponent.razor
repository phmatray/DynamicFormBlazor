@namespace FormCraft.ForMudBlazor
@typeparam TModel
@inherits FieldComponentBase<TModel, IBrowserFile?>
@implements IFileUploadFieldComponent<TModel>

<MudFileUpload
    T="IBrowserFile"
    Accept="@Accept"
    MaximumFileCount="1"
    OnFilesChanged="@(async e => await OnFileChanged(e.File))"
    Hidden="false"
    InputClass="absolute mud-width-full mud-height-full overflow-hidden z-20"
    InputStyle="opacity:0"
    @ondragenter="@SetDragClass"
    @ondragleave="@ClearDragClass"
    @ondragend="@ClearDragClass">
    <ActivatorContent>
        <MudPaper Height="100px"
                  Outlined="true"
                  Class="@_dragClass">
            <MudText Typo="Typo.subtitle2">
                @if (CurrentValue != null)
                {
                    @CurrentValue.Name
                }
                else
                {
                    @("Drag and drop file here or click to browse")
                }
            </MudText>
        </MudPaper>
    </ActivatorContent>
</MudFileUpload>

@if (!string.IsNullOrEmpty(HelpText))
{
    <MudText Typo="Typo.caption" Class="mt-1">@HelpText</MudText>
}